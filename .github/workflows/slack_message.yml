name: Notify Slack on Issue Events

on:
  issues:
    types: [opened, edited, closed]

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Install Dependencies
        run: npm install axios
      - name: Send notification to Slack
        uses: actions/github-script@v6
        with:
          script: |
            const axios = require('axios');

            const issue = context.payload.issue;
            const event = context.eventName;
            const webhookUrl = process.env.SLACK_WEBHOOK_URL;

            const message = {
              text: `Issue ${event}: *${issue.title}* - ${issue.html_url}`,
              channel: '#your-channel', // Replace with your channel name
              username: 'GitHub Issues Bot',
            };

            axios.post(webhookUrl, message, {
              headers: { 'Content-Type': 'application/json' }
            })
            .then(response => {
              console.log('Notification sent successfully');
            })
            .catch(error => {
              console.error('Error:', error);
            });
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
